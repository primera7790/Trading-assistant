from decimal import Decimal


def work_volume_rewrite(item):
    work_volume_file_new = open("volume.txt", "w")
    work_volume_file_new.write(item)
    work_volume_file_new.close()


def day_results_rewrite(item):
    day_results_file = open("day_results.txt", "w")
    day_results_file.write(item)
    day_results_file.close()


balance = open("balance.txt")
read_balance = balance.read()

work_volume_file = open("volume.txt")
read_work_volume = work_volume_file.read()

day_results_file = open("day_results.txt")
read_day_results = day_results_file.read()

work_volume_day = Decimal(read_balance) * Decimal(12.5) // 100 * 100
new_volume = Decimal(read_work_volume)

results = Decimal(input("Результат сделки, %: "))   # "0" - сброс до объема начала дня.

changed_balance = new_volume * (100 + results - Decimal(0.1)) / 100
new_balance = int((Decimal(read_balance) + changed_balance - new_volume) * 100) / 100

if results < -0.5:
    work_volume_rewrite(str(int(read_work_volume) - 100))
    day_results_rewrite(str(Decimal(read_day_results) + results))

elif results > 1:
    work_volume_rewrite(str(int(read_work_volume) + 100))
    day_results_rewrite(str(Decimal(read_day_results) + results))

if results == 0:
    work_volume_rewrite(str(int(work_volume_day)))
    day_results_rewrite(str(results))

else:
    new_balance_file = open("balance.txt", "w")
    new_balance_file.write(str(new_balance))
    new_balance_file.close()

    day_results_rewrite(str(Decimal(read_day_results) + results))

work_volume_file = open("volume.txt")
work_volume = work_volume_file.read()

day_results_file = open("day_results.txt")
read_day_results = day_results_file.read()

if Decimal(read_day_results) < -1:
    print("На сегодня торговля окончена")
else:
    print(work_volume)
